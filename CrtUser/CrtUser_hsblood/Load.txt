set pages 0 
set lines 100

conn system/tigersysdba@his;
spool log\log.log
prompt AUTHOR:ZH 2016/02/27
prompt

select hospital.get_system_option('医院名称') || ';' || user || ';' ||
       to_char(sysdate, 'yyyy/mm/dd hh24:mi:ss') h
  from dual;
prompt 
prompt ------START------
prompt 

show user;

rem alter system set processes =500 scope=spfile;
rem alter system set sga_target =1024M scope=spfile; 
rem alter system set db_files =1024 scope=spfile;
rem ALTER SYSTEM SET SEC_CASE_SENSITIVE_LOGON = FALSE;
rem ALTER PROFILE "DEFAULT" LIMIT FAILED_LOGIN_ATTEMPTS UNLIMITED;

PROMPT
PROMPT 创建表空间....
PROMPT



CREATE SMALLFILE TABLESPACE "HSBLOOD_TAB" DATAFILE
  'D:\APP\YJYY\ORADATA\HIS\HSBLOOD_TAB.DBF' SIZE 10M AUTOEXTEND ON NEXT 100M MAXSIZE 8001M
  LOGGING EXTENT MANAGEMENT LOCAL SEGMENT SPACE MANAGEMENT AUTO;

CREATE SMALLFILE TABLESPACE "HSBLOOD_IND" DATAFILE
  'D:\APP\YJYY\ORADATA\HIS\HSBLOOD_IND.DBF' SIZE 10M AUTOEXTEND ON NEXT 100M MAXSIZE 8001M
  LOGGING EXTENT MANAGEMENT LOCAL SEGMENT SPACE MANAGEMENT AUTO;

CREATE SMALLFILE TABLESPACE "TSP_HSBLOOD" DATAFILE
  'D:\APP\YJYY\ORADATA\HIS\TSP_HSBLOOD.DBF' SIZE 10M AUTOEXTEND ON NEXT 100M MAXSIZE 8001M
  LOGGING EXTENT MANAGEMENT LOCAL SEGMENT SPACE MANAGEMENT AUTO;

PROMPT
PROMPT 创建表用户....
PROMPT

CREATE USER "HSBLOOD"  PROFILE "DEFAULT" IDENTIFIED BY "BLOOD" DEFAULT TABLESPACE "HSBLOOD_TAB" TEMPORARY TABLESPACE "TEMP" ACCOUNT UNLOCK;
GRANT "CONNECT" TO "HSBLOOD"  ;
GRANT "RESOURCE" TO "HSBLOOD"  ;
GRANT CREATE SESSION TO "HSBLOOD"  ;
GRANT CREATE SYNONYM TO "HSBLOOD"  ;
GRANT CREATE TABLE TO "HSBLOOD"  ;
GRANT CREATE TABLESPACE TO "HSBLOOD"  ;
GRANT CREATE TRIGGER TO "HSBLOOD"  ;
GRANT CREATE TYPE TO "HSBLOOD"  ;
GRANT CREATE VIEW TO "HSBLOOD"  ;
GRANT CREATE SEQUENCE TO "HSBLOOD"  ;
GRANT "HSHIS_USER" TO "HSBLOOD"  ;
grant dba to "HSBLOOD";


conn HSBLOOD/BLOOD@his;


prompt ------END------

select 'ZH_hint:' || to_char(sysdate, 'yyyy/mm/dd hh24:mi:ss') d from dual;
spool off

exit
